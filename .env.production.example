# =====================================================
# FIXIONMAIL - PRODUCTION ENVIRONMENT VARIABLES
# =====================================================
# Copy these to your Railway service environment variables.
# This configuration runs everything in a single service (no Redis).
# Perfect for ~10-50 users.
# =====================================================

# === SERVICE TYPE ===
# For single-service deployment, use "web"
SERVICE_TYPE=web

# === SUPABASE (Required) ===
# Get these from: Supabase Dashboard > Settings > API
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
# Get JWT Secret from: Settings > API > JWT Settings
SUPABASE_JWT_SECRET=your-supabase-jwt-secret

# === REDIS (NOT NEEDED for small deployments) ===
# Leave these UNSET to use in-process APScheduler workers.
# Only set REDIS_URL if you need separate worker processes.
# REDIS_URL=
# ENABLE_REDIS_QUEUE=false

# === IN-PROCESS WORKERS (APScheduler) ===
# These run inside the web process - perfect for 10-50 users
ENABLE_STORY_WORKER=true
ENABLE_DAILY_SCHEDULER=true
ENABLE_DELIVERY_WORKER=true

# === AI APIS (Required) ===
# Anthropic - for Claude story generation
ANTHROPIC_API_KEY=sk-ant-api03-...

# OpenAI - for embeddings (used in story bible)
OPENAI_API_KEY=sk-...

# === EMAIL (Required for story delivery) ===
# Resend - https://resend.com
RESEND_API_KEY=re_...

# === MEDIA GENERATION (Optional) ===
# Replicate - for cover images
# REPLICATE_API_TOKEN=r8_...

# === STRIPE (Required for payments) ===
# Get from: Stripe Dashboard > Developers > API keys
STRIPE_SECRET_KEY=sk_live_...
STRIPE_PUBLISHABLE_KEY=pk_live_...
# Get from: Stripe Dashboard > Webhooks > Your endpoint > Signing secret
STRIPE_WEBHOOK_SECRET=whsec_...

# Stripe Price IDs - create these in Stripe Dashboard > Products
STRIPE_PRICE_MONTHLY=price_...
STRIPE_PRICE_ANNUAL=price_...
STRIPE_PRICE_CREDITS_5=price_...
STRIPE_PRICE_CREDITS_10=price_...
STRIPE_PRICE_CREDITS_20=price_...

# === APPLICATION ===
ENVIRONMENT=production
APP_BASE_URL=https://your-app.up.railway.app
PORT=8000

# === STORY CONFIGURATION ===
CHAPTER_TARGET_WORDS=2500
TOTAL_CHAPTERS=30
CREDITS_PER_NEW_USER=25
CREDITS_PER_CHOICE=1

# === LLM CONFIGURATION ===
MODEL_NAME=claude-sonnet-4-20250514
MAX_TOKENS=16000
TEMPERATURE=0.7

# === FEATURE FLAGS ===
ENABLE_CREDIT_SYSTEM=true
ENABLE_MEDIA_GENERATION=false
ENABLE_STREAMING=true

# === OPTIONAL: LANGSMITH TRACING ===
# For debugging AI calls - https://smith.langchain.com
# LANGCHAIN_TRACING_V2=true
# LANGCHAIN_PROJECT=fixionmail-production
# LANGCHAIN_API_KEY=lsv2_pt_...

# === SECURITY ===
# Leave DEBUG=false in production!
DEBUG=false
DEV_MODE=false
LOG_LEVEL=INFO

# CORS - set to your frontend domain
# ALLOWED_ORIGINS=https://your-app.up.railway.app

# =====================================================
# RAILWAY-SPECIFIC NOTES
# =====================================================
#
# 1. Set these in Railway Dashboard > Your Service > Variables
#
# 2. For persistent storage (ChromaDB, checkpoints):
#    - Add a volume in Railway
#    - Set STORAGE_PATH=/app/storage
#    - Mount volume at /app/storage
#
# 3. Stripe Webhook URL:
#    https://your-app.up.railway.app/api/stripe/webhook
#
# 4. Supabase Auth Redirect URL:
#    https://your-app.up.railway.app/auth/callback
#
# =====================================================
